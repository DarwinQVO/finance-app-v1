# Flow 3: View Transaction

**C√≥mo funciona el panel de detalles de una transacci√≥n**

## Story: el usuario ve los detalles

### Escena 1: Timeline normal

el usuario est√° viendo su timeline:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Finance App              [Upload] [Filter] [‚öôÔ∏è]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Filters: [All accounts] [Sep 2025]              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                  ‚îÇ
‚îÇ  Sep 28  Starbucks              -$5.67  USD     ‚îÇ
‚îÇ  Sep 27  Amazon                 -$89.99 USD     ‚îÇ
‚îÇ  Sep 26  Netflix                -$15.99 USD     ‚îÇ
‚îÇ  Sep 25  Costco                -$234.56 USD     ‚îÇ
‚îÇ                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

Hace **click** en "Starbucks".

---

### Escena 2: Panel de detalles aparece

Un panel slide desde la derecha:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Timeline              ‚îÇ  Transaction Details    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Filters: [All]        ‚îÇ  Starbucks              ‚îÇ
‚îÇ                        ‚îÇ  Sep 28, 2025           ‚îÇ
‚îÇ  Sep 28  Starbucks ‚óÑ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Sep 27  Amazon        ‚îÇ  üí∞ Amount              ‚îÇ
‚îÇ  Sep 26  Netflix       ‚îÇ  -$5.67 USD             ‚îÇ
‚îÇ  Sep 25  Costco        ‚îÇ                         ‚îÇ
‚îÇ                        ‚îÇ  üè¶ Account             ‚îÇ
‚îÇ                        ‚îÇ  Bank of America        ‚îÇ
‚îÇ                        ‚îÇ                         ‚îÇ
‚îÇ                        ‚îÇ  üìÑ Original            ‚îÇ
‚îÇ                        ‚îÇ  STARBUCKS STORE #12345 ‚îÇ
‚îÇ                        ‚îÇ                         ‚îÇ
‚îÇ                        ‚îÇ  üìÅ Source              ‚îÇ
‚îÇ                        ‚îÇ  bofa_2025_09.pdf       ‚îÇ
‚îÇ                        ‚îÇ                         ‚îÇ
‚îÇ                        ‚îÇ  üéØ Confidence          ‚îÇ
‚îÇ                        ‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë  85%        ‚îÇ
‚îÇ                        ‚îÇ                         ‚îÇ
‚îÇ                        ‚îÇ  [Delete] [Close]       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

el usuario puede ver:
- **Merchant normalizado**: "Starbucks"
- **Merchant original**: "STARBUCKS STORE #12345"
- **Source PDF**: De d√≥nde vino
- **Confidence**: Qu√© tan seguro est√° el clustering

---

## Informaci√≥n mostrada

### 1. B√°sico
- **Merchant** (normalizado): "Starbucks"
- **Date**: "Sep 28, 2025"
- **Amount**: "-$5.67 USD"
- **Account**: "Bank of America"

### 2. Metadata
- **Original description**: Lo que dec√≠a el PDF
- **Source PDF**: `bofa_2025_09.pdf`
- **Statement date**: "Sep 30, 2025" (fecha del statement, no de la transacci√≥n)
- **Line number**: 47 (l√≠nea del PDF donde apareci√≥)

### 3. Pipeline info
- **Cluster ID**: `cluster_abc123` (para debug)
- **Confidence**: 85% (0.0-1.0)
- **Type**: expense | income | transfer
- **Created at**: "2025-09-28 10:34:22"

### 4. Transfer info (si aplica)
- **Transfer pair**: Link a la otra mitad
- **From account**: "BofA"
- **To account**: "Wise"

---

## UI Components

### Component principal

```javascript
// renderer/components/TransactionDetail.jsx
function TransactionDetail({ transactionId, onClose }) {
  const [txn, setTxn] = useState(null);
  const [observation, setObservation] = useState(null);

  useEffect(() => {
    // Fetch transaction
    const t = window.electron.getTransaction(transactionId);
    setTxn(t);

    // Fetch original observation
    const obs = window.electron.getObservation(t.observation_id);
    setObservation(obs);
  }, [transactionId]);

  if (!txn) return <div>Loading...</div>;

  return (
    <div className="transaction-detail">
      <h2>{txn.merchant}</h2>
      <p className="date">{formatDate(txn.date)}</p>

      <Section title="üí∞ Amount">
        <Amount value={txn.amount} currency={txn.currency} />
      </Section>

      <Section title="üè¶ Account">
        <AccountBadge account={txn.account} />
      </Section>

      <Section title="üìÑ Original">
        <code>{observation.description}</code>
      </Section>

      <Section title="üìÅ Source">
        {observation.pdf_filename}
      </Section>

      <Section title="üéØ Confidence">
        <ProgressBar value={txn.confidence} />
        <span>{Math.round(txn.confidence * 100)}%</span>
      </Section>

      {txn.transfer_pair_id && (
        <Section title="‚ÜîÔ∏è Transfer">
          <TransferLink pairId={txn.transfer_pair_id} />
        </Section>
      )}

      <div className="actions">
        <Button danger onClick={() => handleDelete(txn.id)}>
          Delete
        </Button>
        <Button onClick={onClose}>Close</Button>
      </div>
    </div>
  );
}
```

---

## Layout: Split panel

El timeline NO desaparece. El panel aparece al lado.

### Desktop (1920x1080)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Timeline (60%)     ‚îÇ  Details (40%)       ‚îÇ
‚îÇ                     ‚îÇ                      ‚îÇ
‚îÇ  [Lista de trans]   ‚îÇ  [Detalles de 1]     ‚îÇ
‚îÇ                     ‚îÇ                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Responsive: Mobile/smaller screen
El panel cubre toda la pantalla, con bot√≥n "Back".

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [‚Üê Back]  Transaction Details           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Starbucks                               ‚îÇ
‚îÇ  Sep 28, 2025                            ‚îÇ
‚îÇ  ...                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Transfer linking en UI

Cuando una transacci√≥n es un **transfer**, se ve diferente.

### En el timeline
```
Sep 26  ‚ÜîÔ∏è Transfer to Wise    -$1,000.00  USD  [BofA]
                              +$1,000.00  USD  [Wise]
```

**Nota**: Las 2 transacciones aparecen agrupadas visualmente.

### En el panel de detalles
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Transfer to Wise                       ‚îÇ
‚îÇ  Sep 26, 2025                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üí∞ Amount                              ‚îÇ
‚îÇ  -$1,000.00 USD                         ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  üè¶ From Account                        ‚îÇ
‚îÇ  Bank of America                        ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚ÜîÔ∏è Linked Transfer                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ +$1,000.00 USD                 ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Wise                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Sep 27, 2025 (1 day later)    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ [View details ‚Üí]               ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  üìÑ Original                            ‚îÇ
‚îÇ  TRANSFER TO WISE                       ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  [Delete pair] [Close]                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Click en "View details"** ‚Üí Abre el detalle del otro lado del transfer.

---

## Confidence score explicado

El confidence score indica qu√© tan seguro est√° el pipeline de la normalizaci√≥n.

### Alto confidence (>80%)
```
üéØ Confidence
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë  85%

‚úì Merchant conocido
‚úì Patr√≥n encontrado en reglas
‚úì Cluster bien definido
```

### Medio confidence (50-80%)
```
üéØ Confidence
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  65%

‚ö†Ô∏è Merchant nuevo
‚úì Cluster encontrado (5 miembros)
```

### Bajo confidence (<50%)
```
üéØ Confidence
‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  35%

‚ö†Ô∏è Merchant desconocido
‚ö†Ô∏è Cluster peque√±o (2 miembros)
‚ö†Ô∏è String muy diferente a otros
```

**Uso futuro**: el usuario puede filtrar por confidence para revisar transacciones dudosas.

---

## Delete transaction

el usuario hace click en "Delete" en el panel.

### Confirmaci√≥n
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚ö†Ô∏è Borrar transacci√≥n                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                         ‚îÇ
‚îÇ  ¬øBorrar "Starbucks -$5.67"?           ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  Esta acci√≥n no se puede deshacer.     ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  Tambi√©n se borrar√° de observations.   ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  [Cancelar] [Borrar]                   ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### C√≥digo
```javascript
function handleDelete(transactionId) {
  const confirmed = confirm('¬øBorrar esta transacci√≥n?');
  if (!confirmed) return;

  // Delete from transactions
  db.execute('DELETE FROM transactions WHERE id = ?', [transactionId]);

  // Delete from observations
  db.execute('DELETE FROM observations WHERE canonical_id = ?', [transactionId]);

  // Close panel
  onClose();

  // Refetch timeline
  fetchTransactions();
}
```

**Nota**: Si vuelves a subir el mismo PDF, la transacci√≥n volver√° a aparecer.

---

## Keyboard shortcuts

- **Esc**: Cerrar panel
- **Delete**: Borrar transacci√≥n (con confirmaci√≥n)
- **‚Üê/‚Üí**: Navegar a transacci√≥n anterior/siguiente
- **Ctrl+F**: Focus en search (en timeline)

```javascript
useEffect(() => {
  const handleKeyDown = (e) => {
    if (e.key === 'Escape') onClose();
    if (e.key === 'Delete') handleDelete(txn.id);
    if (e.key === 'ArrowLeft') navigatePrevious();
    if (e.key === 'ArrowRight') navigateNext();
  };

  window.addEventListener('keydown', handleKeyDown);
  return () => window.removeEventListener('keydown', handleKeyDown);
}, []);
```

---

## Animation

El panel **slide in** desde la derecha con animaci√≥n suave.

```css
.transaction-detail {
  position: fixed;
  right: 0;
  top: 0;
  width: 40%;
  height: 100vh;
  background: white;
  box-shadow: -2px 0 8px rgba(0,0,0,0.1);

  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}
```

Al cerrar, **slide out** hacia la derecha.

---

## Edge cases

### 1. Transacci√≥n sin observation

**S√≠ntoma**: La transacci√≥n est√° en `transactions` pero no hay observation linkeada.

**UI**:
```
üìÑ Original
‚ö†Ô∏è No disponible (observation eliminada)
```

---

### 2. Transfer sin pareja

**S√≠ntoma**: `type = 'transfer'` pero `transfer_pair_id` es NULL.

**UI**:
```
‚ÜîÔ∏è Transfer
‚ö†Ô∏è No se encontr√≥ la otra mitad del transfer
```

**Acci√≥n sugerida**: Revisar si el otro PDF fue subido.

---

### 3. Confidence = 0

**S√≠ntoma**: El clustering fall√≥ completamente.

**UI**:
```
üéØ Confidence
‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  0%

‚ö†Ô∏è Normalizaci√≥n manual recomendada
```

**Acci√≥n futura**: Permitir editar merchant.

---

## Mockup completo

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Finance App         [Upload] [‚öôÔ∏è]  ‚îÇ  Transaction Details        [√ó]      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Filters: [BofA] [Sep 2025]        ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚îÇ  Starbucks                          ‚îÇ
‚îÇ  Sep 28  Starbucks ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  Sep 28, 2025  ‚Ä¢  10:34 AM         ‚îÇ
‚îÇ          -$5.67 USD                ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  Sep 27  Amazon                    ‚îÇ                                     ‚îÇ
‚îÇ          -$89.99 USD               ‚îÇ  üí∞ Amount                          ‚îÇ
‚îÇ                                    ‚îÇ  -$5.67 USD                         ‚îÇ
‚îÇ  Sep 26  Netflix                   ‚îÇ                                     ‚îÇ
‚îÇ          -$15.99 USD               ‚îÇ  üè¶ Account                         ‚îÇ
‚îÇ                                    ‚îÇ  Bank of America (****1234)         ‚îÇ
‚îÇ  Sep 25  Costco                    ‚îÇ                                     ‚îÇ
‚îÇ          -$234.56 USD              ‚îÇ  üè∑Ô∏è Type                           ‚îÇ
‚îÇ                                    ‚îÇ  Expense                            ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ  127 transactions                  ‚îÇ  üìÑ Original Description            ‚îÇ
‚îÇ                                    ‚îÇ  STARBUCKS STORE #12345             ‚îÇ
‚îÇ                                    ‚îÇ  SANTA MONICA CA                    ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚îÇ  üìÅ Source File                     ‚îÇ
‚îÇ                                    ‚îÇ  bofa_2025_09.pdf                   ‚îÇ
‚îÇ                                    ‚îÇ  Line 47  ‚Ä¢  Statement: Sep 30      ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚îÇ  üéØ Confidence                      ‚îÇ
‚îÇ                                    ‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë  85%                    ‚îÇ
‚îÇ                                    ‚îÇ  ‚úì Pattern matched: STARBUCKS.*     ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚îÇ  üîó Cluster                         ‚îÇ
‚îÇ                                    ‚îÇ  cluster_abc123 (12 members)        ‚îÇ
‚îÇ                                    ‚îÇ  ‚Ä¢ Starbucks Store #12345           ‚îÇ
‚îÇ                                    ‚îÇ  ‚Ä¢ Starbucks Store #67890           ‚îÇ
‚îÇ                                    ‚îÇ  ‚Ä¢ Starbucks #11111                 ‚îÇ
‚îÇ                                    ‚îÇ  ... 9 more                         ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚îÇ  [üóëÔ∏è Delete]        [Close]        ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Resumen

### Qu√© muestra
- Info normalizada (merchant, amount, date, account)
- Info raw (original description del PDF)
- Metadata (source, line number, confidence)
- Transfers (si aplica, con link a la pareja)
- Cluster info (para debug)

### Acciones
- **Delete**: Borrar transacci√≥n (con confirmaci√≥n)
- **Close**: Cerrar panel
- **Navigate**: Flechas para ir a prev/next
- **View transfer pair**: Si es transfer, ver el otro lado

### UX
- Panel slide desde derecha
- Timeline sigue visible (split screen)
- Keyboard shortcuts
- Animaciones suaves

---

**Pr√≥ximo flow**: Lee [flow-4-merchant-normalization.md](flow-4-merchant-normalization.md) para entender c√≥mo funciona la normalizaci√≥n.
