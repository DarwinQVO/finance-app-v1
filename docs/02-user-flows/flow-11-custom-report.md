# Flow 11: Custom Report Builder üîß

**Crea tus propios reports con drag & drop**

## Funcionalidad

Custom report builder que permite crear reports personalizados con configuraci√≥n visual.

**Capacidades**:
- Data source selection (transactions, budgets, recurring)
- Filters configurables (merchant, date, account, category)
- Grouping (month, category, merchant, account)
- Aggregations (sum, count, avg, min, max)
- Visualizations (table, bar chart, line chart, pie chart)
- Save/edit/delete custom reports
- Re-run autom√°tico con latest data

---

## Implementaci√≥n: Report Builder

el usuario construye su propio report:
1. Selecciona data source (transactions)
2. Selecciona filters (Uber, 2025)
3. Selecciona grouping (by month)
4. Selecciona aggregations (sum, average, count)
5. Selecciona visualizaci√≥n (table, chart)

**Click "Generate" ‚Üí Report listo en <1 segundo**.

---

## Story: el usuario crea su primer custom report

### Escena 1: Abrir Custom Report Builder

el usuario va a Reports ‚Üí "Create Custom Report".

**Ve esto**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîß Custom Report Builder                           [Back]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Step 1: Report Name                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  [Uber Spending by Month              ]           ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  Step 2: Data Source                                         ‚îÇ
‚îÇ  ‚óã Transactions                                              ‚îÇ
‚îÇ  ‚óã Budgets                                                   ‚îÇ
‚îÇ  ‚óã Recurring                                                 ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  Step 3: Filters                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Merchant: [Uber                    ‚ñæ]            ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Date range: [2025                  ‚ñæ]            ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Account: [All                      ‚ñæ]            ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  [+ Add filter]                                   ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  Step 4: Group by                                            ‚îÇ
‚îÇ  [Month ‚ñæ]                                                   ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  Step 5: Show                                                ‚îÇ
‚îÇ  [‚òë] Total (sum)                                            ‚îÇ
‚îÇ  [‚òë] Count (number of transactions)                         ‚îÇ
‚îÇ  [ ] Average                                                ‚îÇ
‚îÇ  [ ] Min/Max                                                ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  Step 6: Visualization                                       ‚îÇ
‚îÇ  ‚óã Table    ‚óã Bar Chart    ‚óã Line Chart    ‚óã Pie Chart     ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  [Preview Report]  [Save & Generate]                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### Escena 2: Configurar report

el usuario llena el form:

**Step 1**: Name = "Uber Spending by Month"
**Step 2**: Data Source = Transactions
**Step 3**: Filters:
- Merchant = "Uber"
- Date range = "2025"
- Account = "All"

**Step 4**: Group by = "Month"
**Step 5**: Show:
- ‚òë Total (sum)
- ‚òë Count

**Step 6**: Visualization = "Bar Chart"

**Click "Preview Report"**.

---

### Escena 3: Preview

**Ve preview** (< 0.5 segundos):
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Preview: Uber Spending by Month                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                              ‚îÇ
‚îÇ                  üöó Uber Spending by Month                   ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  $200  ‚î§                              ‚ñà‚ñà                     ‚îÇ
‚îÇ        ‚îÇ                              ‚ñà‚ñà                     ‚îÇ
‚îÇ  $150  ‚î§          ‚ñà‚ñà                  ‚ñà‚ñà                     ‚îÇ
‚îÇ        ‚îÇ          ‚ñà‚ñà      ‚ñà‚ñà          ‚ñà‚ñà                     ‚îÇ
‚îÇ  $100  ‚î§  ‚ñà‚ñà      ‚ñà‚ñà      ‚ñà‚ñà      ‚ñà‚ñà  ‚ñà‚ñà                     ‚îÇ
‚îÇ        ‚îÇ  ‚ñà‚ñà      ‚ñà‚ñà      ‚ñà‚ñà      ‚ñà‚ñà  ‚ñà‚ñà                     ‚îÇ
‚îÇ   $50  ‚î§  ‚ñà‚ñà      ‚ñà‚ñà      ‚ñà‚ñà      ‚ñà‚ñà  ‚ñà‚ñà      ‚ñà‚ñà            ‚îÇ
‚îÇ        ‚îÇ                                                      ‚îÇ
‚îÇ    $0  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ
‚îÇ            Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep       ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Jan: $89.50  (11 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Feb: $124.30 (15 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Mar: $156.70 (19 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Apr: $98.20  (12 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  May: $112.80 (14 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Jun: $187.90 (23 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Jul: $143.40 (17 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Aug: $167.20 (21 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Sep: $79.30  (10 rides)                           ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  Total: $1,159.30 across 142 rides                           ‚îÇ
‚îÇ  Average per month: $128.81                                  ‚îÇ
‚îÇ  Average per ride: $8.16                                     ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  [Edit Configuration]  [Save Report]  [Export]               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Perfecto!** el usuario ve exactamente lo que quer√≠a.

---

### Escena 4: Guardar report

el usuario hace click en "Save Report".

**Ve confirmaci√≥n**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚úì Report Saved                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  "Uber Spending by Month" has been      ‚îÇ
‚îÇ  saved to your custom reports.          ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  You can access it anytime from the     ‚îÇ
‚îÇ  Reports page.                          ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  [View Reports Page]  [Close]           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### Escena 5: Ver saved reports

el usuario va a Reports page.

**Ve esto**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Reports                                    [Export] ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìä Pre-built Reports                                ‚îÇ
‚îÇ  [Los 6 pre-built reports...]                        ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  üîß Your Custom Reports                              ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  üöó Uber Spending by Month                  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  Last generated: 2 minutes ago              ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  [View] [Edit] [Delete]                     ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  [+ Create Custom Report]                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### Escena 6: Re-run report

**1 mes despu√©s**: Es octubre. el usuario quiere actualizar el report.

**Hace esto**:
1. Click en "View" en "Uber Spending by Month"

**Report se regenera autom√°ticamente** con data de Oct incluida:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üöó Uber Spending by Month                          [Back]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ...                                                         ‚îÇ
‚îÇ  Sep: $79.30  (10 rides)                                     ‚îÇ
‚îÇ  Oct: $145.60 (18 rides)  ‚Üê NEW                              ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  Total: $1,304.90 across 160 rides                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Perfecto**: Report siempre est√° actualizado con latest data.

---

## Ejemplo 2: Report m√°s complejo

el usuario quiere: "Gastos en restaurantes, solo fines de semana, √∫ltimos 6 meses".

**Configuraci√≥n**:
```
Name: Weekend Restaurant Spending
Data Source: Transactions
Filters:
  - Category: Food & Dining
  - Merchant: (exclude Starbucks, McDonald's, etc - fast food)
  - Date range: Last 6 months
  - Day of week: Saturday, Sunday
Group by: Week
Show: Total, Count, Average
Visualization: Table
```

**Result**:
```
Week of     Total     Count    Avg/meal
Sep 23-29   $234.50   5        $46.90
Sep 16-22   $189.30   4        $47.32
Sep 9-15    $156.70   3        $52.23
...
```

---

## Ejemplo 3: Comparison report

el usuario quiere comparar gastos 2024 vs 2025 por categor√≠a.

**Configuraci√≥n**:
```
Name: 2024 vs 2025 by Category
Data Source: Transactions
Filters: None (all)
Group by: Category
Show: Total
Split by: Year
Visualization: Bar Chart (side-by-side)
```

**Result**:
```
            2024    2025    Change
Food        $8.5k   $10.2k  +20%
Housing     $21k    $21.6k  +3%
Transport   $4.2k   $5.1k   +21%
...
```

---

## C√≥mo funciona: Report Engine

### Report configuration object

```javascript
const reportConfig = {
  id: 'custom_report_1',
  name: 'Uber Spending by Month',
  dataSource: 'transactions',

  filters: {
    merchant: 'Uber',
    dateRange: { from: '2025-01-01', to: '2025-12-31' },
    accounts: 'all',
    categories: null,
    type: null
  },

  groupBy: 'month',

  aggregations: [
    { field: 'amount', function: 'sum', label: 'Total' },
    { field: 'id', function: 'count', label: 'Count' }
  ],

  sortBy: 'month',
  sortOrder: 'asc',

  visualization: {
    type: 'bar',
    xAxis: 'month',
    yAxis: 'total'
  }
};
```

---

### Query builder

```javascript
function buildQuery(config) {
  let sql = 'SELECT ';
  const params = [];

  // SELECT clause
  const selectFields = [];

  if (config.groupBy) {
    if (config.groupBy === 'month') {
      selectFields.push(`SUBSTR(date, 1, 7) as month`);
    } else if (config.groupBy === 'category') {
      selectFields.push(`category_id, c.name as category`);
    } else if (config.groupBy === 'merchant') {
      selectFields.push(`merchant`);
    }
  }

  config.aggregations.forEach(agg => {
    const func = agg.function.toUpperCase();
    if (func === 'SUM') {
      selectFields.push(`SUM(ABS(${agg.field})) as ${agg.label.toLowerCase()}`);
    } else if (func === 'COUNT') {
      selectFields.push(`COUNT(${agg.field}) as ${agg.label.toLowerCase()}`);
    } else if (func === 'AVG') {
      selectFields.push(`AVG(ABS(${agg.field})) as ${agg.label.toLowerCase()}`);
    }
  });

  sql += selectFields.join(', ');

  // FROM clause
  sql += ` FROM ${config.dataSource} t`;

  if (config.groupBy === 'category') {
    sql += ` LEFT JOIN categories c ON t.category_id = c.id`;
  }

  // WHERE clause
  const whereClauses = [];

  if (config.filters.merchant) {
    whereClauses.push('t.merchant = ?');
    params.push(config.filters.merchant);
  }

  if (config.filters.dateRange) {
    whereClauses.push('t.date >= ? AND t.date <= ?');
    params.push(config.filters.dateRange.from, config.filters.dateRange.to);
  }

  if (config.filters.categories && config.filters.categories.length > 0) {
    const placeholders = config.filters.categories.map(() => '?').join(',');
    whereClauses.push(`t.category_id IN (${placeholders})`);
    params.push(...config.filters.categories);
  }

  if (whereClauses.length > 0) {
    sql += ' WHERE ' + whereClauses.join(' AND ');
  }

  // GROUP BY clause
  if (config.groupBy) {
    if (config.groupBy === 'month') {
      sql += ` GROUP BY month`;
    } else {
      sql += ` GROUP BY ${config.groupBy}`;
    }
  }

  // ORDER BY clause
  if (config.sortBy) {
    sql += ` ORDER BY ${config.sortBy} ${config.sortOrder || 'ASC'}`;
  }

  return { sql, params };
}
```

---

### Execute report

```javascript
async function executeCustomReport(config) {
  const { sql, params } = buildQuery(config);

  const results = await db.all(sql, params);

  // Post-process results
  const processed = processResults(results, config);

  return {
    config,
    data: processed,
    metadata: {
      generatedAt: new Date().toISOString(),
      rowCount: processed.length
    }
  };
}
```

---

## Advanced features

### Multi-level grouping

Group by category AND month:

```javascript
groupBy: ['category', 'month']

// Query result:
Food & Dining, Jan, $892.34
Food & Dining, Feb, $945.67
Transportation, Jan, $456.78
...
```

---

### Calculated fields

el usuario quiere "average per ride" autom√°ticamente.

```javascript
aggregations: [
  { field: 'amount', function: 'sum', label: 'Total' },
  { field: 'id', function: 'count', label: 'Count' }
],
calculatedFields: [
  { name: 'avg_per_ride', formula: 'total / count' }
]
```

---

### Comparison mode

Compare two periods side-by-side.

```javascript
comparison: {
  enabled: true,
  period1: { from: '2024-01-01', to: '2024-12-31', label: '2024' },
  period2: { from: '2025-01-01', to: '2025-12-31', label: '2025' }
}
```

---

## UI: Report library

el usuario ve todos sus custom reports:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîß Your Custom Reports                     [+ New]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üöó Uber Spending by Month                           ‚îÇ
‚îÇ  Bar chart ‚Ä¢ Last run: 2 mins ago                    ‚îÇ
‚îÇ  [View] [Edit] [Duplicate] [Delete]                  ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  üçΩÔ∏è Weekend Restaurant Spending                     ‚îÇ
‚îÇ  Table ‚Ä¢ Last run: 1 week ago                        ‚îÇ
‚îÇ  [View] [Edit] [Duplicate] [Delete]                  ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  üìä 2024 vs 2025 by Category                         ‚îÇ
‚îÇ  Comparison chart ‚Ä¢ Last run: 3 days ago             ‚îÇ
‚îÇ  [View] [Edit] [Duplicate] [Delete]                  ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  üí≥ Credit Card Fees Analysis                        ‚îÇ
‚îÇ  Table ‚Ä¢ Last run: 1 month ago                       ‚îÇ
‚îÇ  [View] [Edit] [Duplicate] [Delete]                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Edge cases

### Edge case 1: Group by con no aggregation

**Escenario**: el usuario selecciona "Group by: Merchant" pero no selecciona aggregations.

**Comportamiento**: Autom√°ticamente agrega "Count" y "Total" (default aggregations).

---

### Edge case 2: Too many groups

**Escenario**: el usuario selecciona "Group by: Merchant" con 200 merchants.

**Comportamiento**: Mostrar top 50, agregar "Show more" button.

---

### Edge case 3: No results

**Escenario**: Filters muy espec√≠ficos, no hay data.

**UI**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üì≠ No data found                                    ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  No transactions match your filters.                 ‚îÇ
‚îÇ  Try adjusting your configuration.                   ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  [Edit Configuration]                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Resumen: Custom Report Builder

### Qu√© hace
- **Build custom reports** con UI visual
- **Save reports** para re-run despu√©s
- **Flexible grouping** (month, category, merchant, etc)
- **Multiple aggregations** (sum, count, avg, min, max)
- **Multiple visualizations** (table, bar, line, pie)
- **Always updated** con latest data

### How it works
- Report config stored as JSON
- SQL query built dynamically from config
- Executed on-demand when el usuario opens report
- Results cached for 5 minutes

### Benefits
- **Flexible**: el usuario puede responder cualquier pregunta
- **Reusable**: Save report, run m√∫ltiples veces
- **Fast**: Query execution <1 segundo
- **Visual**: Charts ayudan a ver patterns

### Phase 3 scope
- ‚úÖ Custom report builder UI
- ‚úÖ Save/edit/delete reports
- ‚úÖ Grouping (single level)
- ‚úÖ Aggregations (sum, count, avg)
- ‚úÖ Filters (merchant, date, category, account)
- ‚úÖ Visualizations (table, bar, line, pie)
- ‚ùå Multi-level grouping (Phase 4)
- ‚ùå Calculated fields (Phase 4)
- ‚ùå Scheduled reports (Phase 4)

---

**Pr√≥ximo flow**: Lee [flow-12-export-data.md](flow-12-export-data.md) para ver c√≥mo el usuario exporta data a CSV/PDF/JSON.
